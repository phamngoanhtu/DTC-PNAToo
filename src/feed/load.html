<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>AIC demo</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
    <link rel="stylesheet" href="../static/css/index.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.1/css/mdb.min.css" rel="stylesheet">
    <!-- Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
</head>

<body>
    <div class="container">

        <div class="row">
            <div class="col-2" id="sidenav" style="overflow-y: scroll;height: 50%;">
                <div class="list-group list-group-flush tab">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">

                        <li class="nav-item">
                            <a style="font-family:Arial, Helvetica, sans-serif;" class="nav-link" id="c-tab"
                                data-toggle="tab" href="#cameras" role="tab" aria-controls="profile"
                                aria-selected="false">Cameras</a>
                        </li>

                    </ul>
                    <div class="tab-content" id="">
                        <div class="tab-pane fade" style="overflow-y: scroll;" id="cameras" role="tabpanel"
                            aria-labelledby="profile-tab">

                        </div>
                        <div class="list-group" id="cam_list"></div>

                    </div>
                </div>

            </div>
            <div class="col">
                <div id="map" style="height: 100%;"></div>
            </div>
        </div>
    </div>
    <script>
        function cam_html(ip) {
            var cam = document.createElement('div');
            console.log('Came_html', ip)
            cam.innerHTML = '<a href="#!"><img  src="' + ip + '.jpg" ></a>';
            return cam;
        }
        function update_camera() {
            document.getElementById('cam_list').innerHTML = "";
            const cam = ['cam_01', 'cam_02', 'cam_03', 'cam_04', 'cam_05', 'cam_06', 'cam_07', 'cam_08', 'cam_09', 'cam_10', 'cam_11']
            for (let i = 0; i < cam.length; i++) {
                document.getElementById('cam_list').appendChild(cam_html(cam[i]));
            }
        }
        console.log("Ready")
        update_camera();
    </script>
    <script>
        ip = 'cam01'
        tmp = '<img src="http://192.168.24.45:5000/stream/' + ip + '">'
        console.log(tmp) 
    </script>
    <!-- <script>
        var camIcon = L.icon({
            iconUrl: 'https://cdn4.iconfinder.com/data/icons/smart-device-filled-outline/64/Camera_cctv_security_security_camera-512.png',
            // shadowUrl: 'leaf-shadow.png',

            iconSize: [50, 45], // size of the icon
            iconAnchor: [15, 30], // point of the icon which will correspond to marker's location
            popupAnchor: [-3, -76] // point from which the popup should open relative to the iconAnchor
        });
        var map = L.map('map').setView([10.770579, -253.30636], 13);
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoiYmh1eWxlIiwiYSI6ImNrd2swZzhyajFuc3oybnF0eml3Nm1xM3AifQ.BUMF6n44tKn_tKUwrxixHA'
        }).addTo(map);

        // Add events
        var set1 = L.marker([10.789129, -253.284044], { icon: camIcon }).addTo(map);
        var set2 = L.marker([10.789803, -253.347387], { icon: camIcon }).addTo(map);
        var set3 = L.marker([10.763328, -253.339834], { icon: camIcon }).addTo(map);
        var set4 = L.marker([10.756076, -253.280439], { icon: camIcon }).addTo(map);
        var set5 = L.marker([10.880511, -253.231816], { icon: camIcon }).addTo(map);
        var set6 = L.marker([10.864749, -253.240743], { icon: camIcon }).addTo(map);
        var set7 = L.marker([10.860955, -253.228126], { icon: camIcon }).addTo(map);
        var set8 = L.marker([10.871745, -253.267179], { icon: camIcon }).addTo(map);
        var set9 = L.marker([10.858848, -253.222032], { icon: camIcon }).addTo(map);
        var set10 = L.marker([10.843506, -253.253875], { icon: camIcon }).addTo(map);
        var set11 = L.marker([10.825803, -253.285718], { icon: camIcon }).addTo(map);
        var set12 = L.marker([10.81341, -253.319836], { icon: camIcon }).addTo(map);
        
        
        
        
        
        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        // set1.on('click', onMapClick);
        // function Mapclick(e,a){
        //     // tmp = a
        //     console.log('Camera',a)
        // const videoElement = document.getElementById("frame");
        // videoElement.setAttribute('src', "http://192.168.24.45:5000/stream/cam01");
        // }
        // var a='sbaas'
        // set1.on("click", Mapclick)
        map.on('click', onMapClick);    
        set2.on('click', onMapClick);


        const cam = ['cam_01', 'cam_02', 'cam_03', 'cam_04', 'cam_05', 'cam_06', 'cam_07', 'cam_08', 'cam_09', 'cam_10', 'cam_11', 'cam_12']

        let pingMap = document.querySelectorAll('.leaflet-marker-icon');
        pingMap.forEach((item, index) => {
            item.addEventListener('click', () => {
                console.log("http://192.168.24.45:5000/stream/" + cam[index])
            })
        })


    </script> -->
</body>